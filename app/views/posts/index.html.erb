<div class="container">
	<div class="row">
		<div class="col-md-12">
			<br>
      <%= will_paginate @posts, renderer: BootstrapPagination::Rails%>
			 <% if not params[:topic_id].nil? %>
        <% if not  current_user.nil? %>
          <%= link_to 'New Post' , new_topic_post_path(params[:topic_id]),class: 'btn btn-primary btn-lg btn-block' %>
        <% end %>
        <br>

        <ul class="post-list">
						<% @posts.each do |f| %>
							<h2><%= link_to f.title+" ("+f.topic.name.upcase+")", topic_post_path(f.topic_id,f), class: "list-heading" %></h2>

            <li class="list-body"><%if f.ratings.present? %><p class="d-inline"> Rating : <%= f.ratings.rating_average %></p>
						<% end %>
            <%if f.comments.present? %><p class="d-inline"> Comment : <%= f.comments.size %></p>
            <% end %></li>
            <li class="list-body"><p><%= f.body %></p></li>
						<% end %>
				</ul>

      <% else %>

					<ul class="post-list">
						<% @posts.group_by{ |t| t.topic_id }.each do |topic , posts| %>
							<h1 class="text-center"> <%= topic_name(topic) %> </h1>
							<br>
							<% posts.each do |f| %>
                <h2><%= link_to f.title+" ("+f.topic.name.upcase+")", topic_post_path(f.topic_id,f), class: "list-heading" %></h2>
                <li class="list-body"> <%if f.ratings.present? %><p class="d-inline"> Rating : <%= f.ratings.rating_average %></p>
                  <% end %>
                  <%if f.comments.present? %>
                    <p class="d-inline"> Comment : <%= f.comments.size %></p>
                  <% end %></li>
								<li class="list-body"><p><%= f.body %></p></li>
							<% end %>
						<% end %>
					</ul>

      <% end%>

      <br>
      <%= will_paginate @posts, renderer: BootstrapPagination::Rails %>

    </div>
		<div class="co-md-6"></div>
	</div>
</div>

